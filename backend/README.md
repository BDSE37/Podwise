# Podwise Backend

Podwise Backend æ˜¯ä¸€å€‹æ¨¡çµ„åŒ–çš„å¾®æœå‹™æ¶æ§‹ï¼Œæ•´åˆäº†å¤šå€‹å°ˆæ¥­åŒ–çš„æœå‹™æ¨¡çµ„ï¼Œåš´æ ¼éµå¾ª OOP åŸå‰‡å’Œ Google Clean Code è¦ç¯„ã€‚

## ğŸ“ æ¨¡çµ„çµæ§‹

```
backend/
â”œâ”€â”€ main.py                 # çµ±ä¸€å…¥å£é»
â”œâ”€â”€ api/                    # API æœå‹™
â”‚   â”œâ”€â”€ main.py            # API æœå‹™å…¥å£
â”‚   â”œâ”€â”€ app.py             # FastAPI æ‡‰ç”¨
â”‚   â””â”€â”€ requirements.txt   # API ä¾è³´
â”œâ”€â”€ config/                 # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ main.py            # é…ç½®æœå‹™å…¥å£
â”‚   â”œâ”€â”€ config_service.py  # é…ç½®æœå‹™
â”‚   â”œâ”€â”€ db_config.py       # è³‡æ–™åº«é…ç½®
â”‚   â””â”€â”€ mongo_config.py    # MongoDB é…ç½®
â”œâ”€â”€ llm/                    # LLM æœå‹™
â”‚   â”œâ”€â”€ main.py            # LLM æœå‹™å…¥å£
â”‚   â”œâ”€â”€ llm_service.py     # LLM æœå‹™
â”‚   â”œâ”€â”€ core/              # LLM æ ¸å¿ƒçµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ base_llm.py    # æŠ½è±¡åŸºé¡
â”‚   â”‚   â”œâ”€â”€ qwen_llm.py    # Qwen å¯¦ä½œ
â”‚   â”‚   â””â”€â”€ ollama_llm.py  # Ollama å¯¦ä½œ
â”‚   â””â”€â”€ requirements.txt   # LLM ä¾è³´
â”œâ”€â”€ ml_pipeline/            # ML Pipeline
â”‚   â”œâ”€â”€ main.py            # ML Pipeline å…¥å£
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒ ML åŠŸèƒ½
â”‚   â”œâ”€â”€ services/          # æœå‹™å±¤
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å±¤
â”‚   â””â”€â”€ requirements.txt   # ML ä¾è³´
â”œâ”€â”€ rag_pipeline/           # RAG Pipeline
â”‚   â”œâ”€â”€ main.py            # RAG Pipeline å…¥å£
â”‚   â”œâ”€â”€ app/               # CrewAI æ‡‰ç”¨
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒ RAG åŠŸèƒ½
â”‚   â”œâ”€â”€ utils/             # RAG å·¥å…·
â”‚   â””â”€â”€ requirements.txt   # RAG ä¾è³´
â”œâ”€â”€ stt/                    # èªéŸ³è½‰æ–‡å­—
â”‚   â”œâ”€â”€ main.py            # STT æœå‹™å…¥å£
â”‚   â””â”€â”€ requirements.txt   # STT ä¾è³´
â”œâ”€â”€ tts/                    # æ–‡å­—è½‰èªéŸ³
â”‚   â”œâ”€â”€ main.py            # TTS æœå‹™å…¥å£
â”‚   â””â”€â”€ requirements.txt   # TTS ä¾è³´
â”œâ”€â”€ utils/                  # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ main.py            # å·¥å…·æœå‹™å…¥å£
â”‚   â”œâ”€â”€ core_services.py   # æ ¸å¿ƒæœå‹™
â”‚   â”œâ”€â”€ audio_search.py    # éŸ³é »æœå°‹
â”‚   â””â”€â”€ common_utils.py    # é€šç”¨å·¥å…·
â””â”€â”€ vector_pipeline/        # å‘é‡è™•ç†
    â”œâ”€â”€ main.py            # å‘é‡è™•ç†å…¥å£
    â””â”€â”€ requirements.txt   # å‘é‡è™•ç†ä¾è³´
```

## ğŸ—ï¸ æ¶æ§‹ç‰¹é»

### æ¨¡çµ„åŒ–è¨­è¨ˆ
- æ¯å€‹æ¨¡çµ„ç¨ç«‹é‹è¡Œ
- æ¸…æ™°çš„è·è²¬åˆ†é›¢
- æ˜“æ–¼ç¶­è­·å’Œæ“´å±•

### OOP åŸå‰‡
- **å°è£**ï¼šæ¯å€‹é¡åˆ¥å°è£ç›¸é—œçš„æ•¸æ“šå’Œæ–¹æ³•
- **ç¹¼æ‰¿**ï¼šä½¿ç”¨æŠ½è±¡åŸºé¡å®šç¾©ä»‹é¢ï¼Œå…·é«”å¯¦ä½œç¹¼æ‰¿åŸºé¡
- **å¤šæ…‹æ€§**ï¼šæ”¯æ´ä¸åŒå¯¦ä½œä¹‹é–“çš„æ›¿æ›
- **æŠ½è±¡**ï¼šä½¿ç”¨ `ABC` å’Œ `@abstractmethod` å®šç¾©æŠ½è±¡ä»‹é¢

### Google Clean Code
- **æ¸…æ™°çš„å‘½åè¦ç¯„**ï¼šé¡åˆ¥å’Œæ–¹æ³•åç¨±å…·æè¿°æ€§
- **å®Œæ•´çš„æ–‡æª”è¨»é‡‹**ï¼šæ¯å€‹æ¨¡çµ„éƒ½æœ‰è©³ç´°çš„ docstring
- **ä¸€è‡´çš„ä»£ç¢¼é¢¨æ ¼**ï¼šä½¿ç”¨ç¾ä»£ Python ç‰¹æ€§
- **å–®ä¸€è·è²¬åŸå‰‡**ï¼šæ¯å€‹é¡åˆ¥éƒ½æœ‰æ˜ç¢ºçš„è·è²¬
- **ä¾è³´åè½‰**ï¼šä¾è³´æŠ½è±¡è€Œéå…·é«”å¯¦ä½œ

### ç›£æ§å’Œæ¸¬è©¦
- Langfuse æ•´åˆ
- æ€§èƒ½ç›£æ§
- A/B æ¸¬è©¦æ”¯æ´
- å®Œæ•´çš„æ¸¬è©¦è¦†è“‹

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´

```bash
# å®‰è£æ‰€æœ‰æ¨¡çµ„çš„ä¾è³´
cd backend
pip install -r requirements.txt

# æˆ–å®‰è£ç‰¹å®šæ¨¡çµ„çš„ä¾è³´
cd rag_pipeline
pip install -r requirements.txt
```

### 2. é‹è¡Œçµ±ä¸€å…¥å£

```bash
# é‹è¡Œæ•´å€‹ Backend ç³»çµ±
python main.py
```

### 3. é‹è¡Œç‰¹å®šæ¨¡çµ„

```bash
# é‹è¡Œ RAG Pipeline
cd rag_pipeline
python main.py

# é‹è¡Œ API æœå‹™
cd api
python main.py

# é‹è¡Œ ML Pipeline
cd ml_pipeline
python main.py
```

## ğŸ”§ æ¨¡çµ„åŠŸèƒ½

### API æœå‹™ (`api/`)
- æä¾›çµ±ä¸€çš„ RESTful API æ¥å£
- æ•´åˆæ‰€æœ‰å¾Œç«¯æœå‹™
- æ”¯æ´ FastAPI æ¡†æ¶

### é…ç½®ç®¡ç† (`config/`)
- é›†ä¸­åŒ–é…ç½®ç®¡ç†
- æ”¯æ´å¤šç’°å¢ƒé…ç½®
- è³‡æ–™åº«é€£æ¥é…ç½®

### LLM æœå‹™ (`llm/`)
- å¤§èªè¨€æ¨¡å‹æœå‹™
- æ”¯æ´å¤šç¨® LLM æä¾›å•†ï¼ˆQwenã€Ollamaï¼‰
- æ¨¡å‹ç®¡ç†å’Œèª¿ç”¨
- æŠ½è±¡åŸºé¡è¨­è¨ˆï¼Œæ˜“æ–¼æ“´å±•

### ML Pipeline (`ml_pipeline/`)
- æ©Ÿå™¨å­¸ç¿’ç®¡é“
- æ¨è–¦ç³»çµ±
- æ¨¡å‹è¨“ç·´å’Œæ¨ç†
- å¤šç¨®æ¨è–¦ç­–ç•¥ï¼ˆå”åŒéæ¿¾ã€å…§å®¹æ¨è–¦ã€æ··åˆæ¨è–¦ï¼‰

### RAG Pipeline (`rag_pipeline/`)
- æª¢ç´¢å¢å¼·ç”Ÿæˆ
- ä¸‰å±¤ CrewAI æ¶æ§‹
- æ™ºèƒ½ TAG æå–
- å‘é‡æœå°‹
- Web Search å‚™æ´
- Langfuse æ•´åˆ
- A/B æ¸¬è©¦æ”¯æ´

### èªéŸ³è½‰æ–‡å­— (`stt/`)
- èªéŸ³è­˜åˆ¥æœå‹™
- æ”¯æ´å¤šç¨®éŸ³é »æ ¼å¼
- å³æ™‚è½‰éŒ„åŠŸèƒ½

### æ–‡å­—è½‰èªéŸ³ (`tts/`)
- èªéŸ³åˆæˆæœå‹™
- å¤šç¨®èªéŸ³é¸é …
- è‡ªç„¶èªéŸ³è¼¸å‡º

### é€šç”¨å·¥å…· (`utils/`)
- æ ¸å¿ƒæœå‹™å·¥å…·
- éŸ³é »æœå°‹åŠŸèƒ½
- é€šç”¨å·¥å…·å‡½æ•¸
- ç’°å¢ƒé…ç½®ç®¡ç†

### å‘é‡è™•ç† (`vector_pipeline/`)
- å‘é‡åŒ–è™•ç†
- åµŒå…¥æ¨¡å‹ç®¡ç†
- å‘é‡æœå°‹å„ªåŒ–

## ğŸ“‹ OOP è¨­è¨ˆæ¨¡å¼

### 1. æŠ½è±¡å·¥å» æ¨¡å¼
```python
# LLM æœå‹™ä½¿ç”¨æŠ½è±¡å·¥å» æ¨¡å¼
from llm.core import BaseLLM, QwenLLM, OllamaLLM

class LLMFactory:
    @staticmethod
    def create_llm(model_type: str, config: dict) -> BaseLLM:
        if model_type == "qwen":
            return QwenLLM(config)
        elif model_type == "ollama":
            return OllamaLLM(config)
```

### 2. ç­–ç•¥æ¨¡å¼
```python
# æ¨è–¦ç³»çµ±ä½¿ç”¨ç­–ç•¥æ¨¡å¼
class Recommender:
    def __init__(self, strategy: str):
        self.strategy = self._get_strategy(strategy)
    
    def get_recommendations(self, user_id: int):
        return self.strategy.recommend(user_id)
```

### 3. è§€å¯Ÿè€…æ¨¡å¼
```python
# æ€§èƒ½ç›£æ§ä½¿ç”¨è§€å¯Ÿè€…æ¨¡å¼
class PerformanceMonitor:
    def __init__(self):
        self.observers = []
    
    def add_observer(self, observer):
        self.observers.append(observer)
    
    def notify(self, event):
        for observer in self.observers:
            observer.update(event)
```

## ğŸ” ä»£ç¢¼å“è³ªæŒ‡æ¨™

### æ¨¡çµ„åŒ–ç¨‹åº¦
- âœ… 19 å€‹ `__init__.py` æª”æ¡ˆ
- âœ… æ¯å€‹æ¨¡çµ„éƒ½æœ‰æ˜ç¢ºçš„åŒ¯å‡ºä»‹é¢
- âœ… ä¾è³´é—œä¿‚æ¸…æ™°

### OOP éµå¾ªåº¦
- âœ… ä½¿ç”¨æŠ½è±¡åŸºé¡å®šç¾©ä»‹é¢
- âœ… ç¹¼æ‰¿çµæ§‹åˆç†
- âœ… å°è£æ€§è‰¯å¥½
- âœ… å¤šæ…‹æ€§æ”¯æ´

### Clean Code éµå¾ªåº¦
- âœ… å‘½åè¦ç¯„æ¸…æ™°
- âœ… æ–‡æª”è¨»é‡‹å®Œæ•´
- âœ… ä»£ç¢¼é¢¨æ ¼ä¸€è‡´
- âœ… è·è²¬åˆ†é›¢æ˜ç¢º

## ğŸ§ª æ¸¬è©¦è¦†è“‹

æ¯å€‹æ¨¡çµ„éƒ½åŒ…å«ï¼š
- å–®å…ƒæ¸¬è©¦
- æ•´åˆæ¸¬è©¦
- æ€§èƒ½æ¸¬è©¦
- ç«¯åˆ°ç«¯æ¸¬è©¦

## ğŸ“ˆ æ€§èƒ½ç›£æ§

- Langfuse è¿½è¹¤
- æ€§èƒ½æŒ‡æ¨™æ”¶é›†
- A/B æ¸¬è©¦æ”¯æ´
- è‡ªå‹•èª¿å„ªæ©Ÿåˆ¶

## ğŸ¤ è²¢ç»æŒ‡å—

1. éµå¾ª OOP åŸå‰‡
2. éµå¾ª Google Clean Code è¦ç¯„
3. æ·»åŠ å®Œæ•´çš„æ¸¬è©¦
4. æ›´æ–°æ–‡æª”
5. æäº¤ Pull Request

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾ã€‚ 